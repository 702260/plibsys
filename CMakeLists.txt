cmake_minimum_required (VERSION 2.8.10)
project (PLib C)
set (PLIB_VERSION_MAJOR 0)
set (PLIB_VERSION_MINOR 0)
set (PLIB_VERSION_PATCH 1)
set (PLIB_VERSION ${PLIB_VERSION_MAJOR}.${PLIB_VERSION_MINOR}.${PLIB_VERSION_PATCH})
set (VERSION ${PLIB_VERSION})

set (top_srcdir ${PROJECT_SOURCE_DIR})

configure_file (
	"${PROJECT_SOURCE_DIR}/Doxyfile.in"
	"${PROJECT_BINARY_DIR}/Doxyfile"
)

subdirs (src)
subdirs (cmake)

set (CPACK_PACKAGE_NAME ${PROJECT_NAME}-installer)
set (CPACK_PACKAGE_VENDOR "Alexander Saprykin")
set (CPACK_PACKAGE_DESCRIPTION_SUMMARY "${PROJECT_NAME} - System routines library")
set (CPACK_PACKAGE_VERSION_MAJOR ${PLIB_VERSION_MAJOR})
set (CPACK_PACKAGE_VERSION_MINOR ${PLIB_VERSION_MINOR})
set (CPACK_PACKAGE_VERSION_PATCH ${PLIB_VERSION_PATCH})
set (CPACK_PACKAGE_VERSION ${PLIB_VERSION})
set (CPACK_PACKAGE_INSTALL_DIRECTORY ${PROJECT_NAME}-${CPACK_PACKAGE_VERSION})
set (CPACK_COMPONENTS_ALL Core)
set (CPACK_COMPONENT_CORE_DISPLAY_NAME "Core components")
set (CPACK_COMPONENT_CORE_DESCRIPTION "Core library with headers")
set (CPACK_COMPONENT_CORE_REQUIRED TRUE)

if (WIN32 AND NOT UNIX)
	set (CPACK_NSIS_DISPLAY_NAME ${PROJECT_NAME})
elseif (UNIX)
	set (CPACK_GENERATOR STGZ)
endif()

include (CPack)